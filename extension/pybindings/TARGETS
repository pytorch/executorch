# @noautodeps
# Any targets that should be shared between fbcode and xplat must be defined in
# targets.bzl. This file can contain fbcode-only targets.

load("@fbcode//executorch/extension/pybindings:targets.bzl", "ATEN_MODULE_DEPS", "MODELS_ATEN_OPS_ATEN_MODE_GENERATED_LIB", "MODELS_ATEN_OPS_LEAN_MODE_GENERATED_LIB", "PORTABLE_MODULE_DEPS", "define_common_targets", "executorch_pybindings")
load("@fbcode_macros//build_defs:python_library.bzl", "python_library")

define_common_targets()

executorch_pybindings(
    srcs = [
        "module.cpp",
    ],
    cppdeps = PORTABLE_MODULE_DEPS,
    python_module_name = "core",
    visibility = ["PUBLIC"],
)

executorch_pybindings(
    srcs = [
        "module.cpp",
    ],
    cppdeps = PORTABLE_MODULE_DEPS + MODELS_ATEN_OPS_LEAN_MODE_GENERATED_LIB,
    python_module_name = "portable",
    visibility = ["PUBLIC"],
)

executorch_pybindings(
    srcs = [
        "module.cpp",
    ],
    cppdeps = ATEN_MODULE_DEPS + MODELS_ATEN_OPS_ATEN_MODE_GENERATED_LIB,
    python_module_name = "aten_mode_lib",
    visibility = ["PUBLIC"],
)

python_library(
    name = "stacktraces",
    srcs = [
        "stacktraces.py",
    ],
    base_module = "executorch.extension.pybindings",
    deps = [
        ":core",
        "//executorch/exir:schema",
    ],
)
