load("@fbsource//xplat/executorch/build:runtime_wrapper.bzl", "runtime")

oncall("executorch")

runtime.python_library(
    name = "multi_backend_recipe_provider",
    srcs = [
        "__init__.py",
        "multi_backend_recipe_provider.py",
    ],
    deps = [
        ":target_recipe_types",
         "//executorch/export:lib",
    ]
)

runtime.python_library(
    name = "target_recipe_types",
    srcs = [
        "target_recipe_types.py",
    ],
    deps = [
         "//executorch/export:recipe",
        "//executorch/backends/xnnpack/recipes:xnnpack_recipe_types",
        "//executorch/backends/apple/coreml:coreml_recipes",
    ]
)

runtime.python_test(
    name = "test_multi_backend_target_recipes",
    srcs = [
        "tests/test_multi_backend_target_recipes.py",
    ],
    deps = [
        "//executorch/export:lib",
        ":multi_backend_recipe_provider",
        "//executorch/backends/apple/coreml:coreml_recipe_types",
        "//executorch/backends/xnnpack:xnnpack_delegate",
        "fbsource//third-party/pypi/coremltools:coremltools",
        "fbsource//third-party/pypi/scikit-learn:scikit-learn",
        "//executorch/backends/xnnpack/test/tester:tester",
    ]
)
