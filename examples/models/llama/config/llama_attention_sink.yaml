base:
  metadata: '{"get_bos_id":128000, "get_eos_ids":[128009, 128001]}'

model:
  use_sdpa_with_kv_cache: False  # attention_sink 需要用标准 SDPA
  use_kv_cache: True
  dtype_override: fp32
  enable_dynamic_shape: True
  # Attention Sink: "sink_size,window_size,eviction_batch_size"
  # sink_size=4: 保留前 4 个 token (BOS + system prompt)
  # window_size=126: 滑动窗口大小
  # eviction_batch_size=1: 每次驱逐 1 个 token
  # 实际 cache 大小 = sink_size + window_size = 4 + 126 = 130
  # 但 ring buffer 需要 2x window, 所以实际是 4 + 126*2 = 256
  use_attention_sink: "4,126,1"

export:
  # max_context_length = sink_size + window_size = 4 + 126 = 130
  # 但 ring buffer 内部会创建 sink_size + window_size * 2 = 256 的缓存
  max_context_length: 130
  max_seq_length: 130

quantization:
  qmode: 8da4w
  group_size: 128
  embedding_quantize: 4,32

backend:
  xnnpack:
    enabled: True
    extended_ops: True
