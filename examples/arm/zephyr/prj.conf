# Copyright (c) Meta Platforms, Inc. and affiliates.
# All rights reserved.
# Copyright 2025 Arm Limited and/or its affiliates.
#
# SPDX-License-Identifier: Apache-2.0

# Enable ExecuTorch
CONFIG_EXECUTORCH=y

# C++
CONFIG_CPP=y
CONFIG_STD_CPP17=y

# Config - increased for ExecuTorch memory requirements
CONFIG_MAIN_STACK_SIZE=8192
CONFIG_HEAP_MEM_POOL_SIZE=32768

# Logging
CONFIG_REQUIRES_FLOAT_PRINTF=y

# Configuration for selective operator builds
# Keep the portable operator registry enabled so selective builds can pull in
# only the kernels required by the model (via EXECUTORCH_SELECT_OPS_MODEL).
# Setting this means you will include all portable ops
CONFIG_EXECUTORCH_BUILD_PORTABLE_OPS=n

# Enable the Zephyr Ethos-U driver so executorch_delegate_ethos_u can reserve
# and use the hardware instance exposed by the board DTS.
CONFIG_ETHOS_U=y

# Add model specific configs
# The default 1 KB pool is too small even for the tiny sample model;
# bump to 256 KB so method buffers and inputs fit during setup.
CONFIG_EXECUTORCH_METHOD_ALLOCATOR_POOL_SIZE=262144
# Ethos-U scratch memory requirements scale with the compiled network.
CONFIG_EXECUTORCH_TEMP_ALLOCATOR_POOL_SIZE=1572864
